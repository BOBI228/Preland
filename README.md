# Preland Secure Collaboration

Веб-сервис для командной работы, объединяющий безопасное хранение паролей, обмен медиафайлами и аудиоконференции.

## Возможности

- Регистрация пользователей и вход по паролю.
- Создание команд с собственным паролем-доступом и разграничением доступа по участникам.
- Шифрование всех записей и загруженных файлов с использованием ключа, производного от пароля команды.
- Обмен зашифрованными паролями и медиафайлами внутри команды.
- Просмотр и скачивание медиа только после разблокировки команды.
- Встроенная аудиокомната для каждой команды на базе WebRTC и Socket.IO.

## Установка и запуск

1. Создайте и активируйте виртуальное окружение (опционально):

   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```

2. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

3. Задайте желаемый секретный ключ и строку подключения к базе данных (по умолчанию используется SQLite `preland.db` в корневой папке проекта):

   ```bash
   export PRELAND_SECRET="super-secret-key"
   # export PRELAND_DATABASE="sqlite:///preland.db"
   ```

4. Запустите сервер:

   ```bash
   python app.py
   ```

   Приложение будет доступно по адресу http://127.0.0.1:5000.

## Работа с приложением

1. Зарегистрируйте пользователя и выполните вход.
2. Создайте команду, указав название и пароль. Этот пароль используется для шифрования данных команды.
3. При первом посещении команды введите пароль для разблокировки. Ключ расшифровки хранится в сессии до выхода или блокировки команды.
4. Добавляйте пароли и загружайте медиафайлы, приглашайте участников по имени пользователя, организуйте аудиоконференции через раздел «Аудиоконференция».
5. При необходимости заблокируйте команду, чтобы повторно потребовать пароль при следующем доступе.

## Примечания безопасности

- Пароль команды не хранится в открытом виде: сохраняется только его криптографический хэш и соль.
- Все данные и файлы шифруются на уровне сервера ключом, полученным из пароля команды через PBKDF2 + Fernet.
- Для работы в продакшене рекомендуется настроить внешний обратный прокси с TLS, надёжное хранение секретов и отдельную базу данных.
